


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>read Coverage Report > ReadFirebaseUserInfoImpl</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope: read<span class="separator">|</span>    <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.nicholas.rutherford.track.my.shot.firebase.read</a>
</div>

<h1>Coverage Summary for Class: ReadFirebaseUserInfoImpl (com.nicholas.rutherford.track.my.shot.firebase.read)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
<th class="coverageStat 
">
  Instruction, %
</th>
</tr>
<tr>
  <td class="name">ReadFirebaseUserInfoImpl</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (9/9)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (20/20)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (67/67)
  </span>
</td>
</tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getAccountInfoFlowByEmail$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (9/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (36/36)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getAccountInfoFlowByEmail$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (19/19)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (74/74)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getAccountInfoKeyFlowByEmail$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (31/31)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getAccountInfoKeyFlowByEmail$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    80%
  </span>
  <span class="absValue">
    (8/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (15/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    98.6%
  </span>
  <span class="absValue">
    (70/71)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getAccountInfoListFlow$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (31/31)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getAccountInfoListFlow$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    75%
  </span>
  <span class="absValue">
    (6/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (16/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    98.5%
  </span>
  <span class="absValue">
    (66/67)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getLastUpdatedDateFlow$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (5/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (26/26)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getLastUpdatedDateFlow$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (8/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (18/18)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (55/55)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getLoggedInAccountEmail$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (4/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (43/43)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getPlayerInfoList$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (36/36)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$getPlayerInfoList$1$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    87.5%
  </span>
  <span class="absValue">
    (7/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (13/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    98.7%
  </span>
  <span class="absValue">
    (78/79)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$isEmailVerifiedFlow$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    83.3%
  </span>
  <span class="absValue">
    (15/18)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (21/21)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (73/73)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ReadFirebaseUserInfoImpl$isLoggedInFlow$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    70%
  </span>
  <span class="absValue">
    (7/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (5/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (25/25)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (33/33)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    76.1%
  </span>
  <span class="absValue">
    (70/92)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (169/169)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    99.6%
  </span>
  <span class="absValue">
    (711/714)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.nicholas.rutherford.track.my.shot.firebase.read
&nbsp;
&nbsp;import com.google.firebase.auth.FirebaseAuth
&nbsp;import com.google.firebase.database.DataSnapshot
&nbsp;import com.google.firebase.database.DatabaseError
&nbsp;import com.google.firebase.database.FirebaseDatabase
&nbsp;import com.google.firebase.database.ValueEventListener
&nbsp;import com.nicholas.rutherford.track.my.shot.firebase.realtime.AccountInfoRealtimeResponse
&nbsp;import com.nicholas.rutherford.track.my.shot.firebase.realtime.PlayerInfoRealtimeResponse
&nbsp;import com.nicholas.rutherford.track.my.shot.helper.constants.Constants
&nbsp;import kotlinx.coroutines.channels.awaitClose
&nbsp;import kotlinx.coroutines.flow.Flow
&nbsp;import kotlinx.coroutines.flow.callbackFlow
&nbsp;import timber.log.Timber
&nbsp;import java.util.Date
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;class ReadFirebaseUserInfoImpl(</b>
<b class="fc">&nbsp;    private val firebaseAuth: FirebaseAuth,</b>
<b class="fc">&nbsp;    private val firebaseDatabase: FirebaseDatabase</b>
&nbsp;) : ReadFirebaseUserInfo {
&nbsp;
<b class="fc">&nbsp;    override fun getLoggedInAccountEmail(): Flow&lt;String?&gt; {</b>
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            firebaseAuth.currentUser?.let { user -&gt;</b>
<b class="fc">&nbsp;                trySend(element = user.email)</b>
<b class="fc">&nbsp;            } ?: run {</b>
<b class="fc">&nbsp;                Timber.e(message = &quot;Error(getLoggedInAccountEmail) -&gt; Current firebase user is set to null&quot;)</b>
<b class="fc">&nbsp;                trySend(element = null)</b>
<b class="pc">&nbsp;            }</b>
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override fun getAccountInfoFlowByEmail(email: String): Flow&lt;AccountInfoRealtimeResponse?&gt; {</b>
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            var accountInfoRealTimeResponse: AccountInfoRealtimeResponse? = null</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;            firebaseDatabase.getReference(Constants.USERS)</b>
<b class="fc">&nbsp;                .child(Constants.ACCOUNT_INFO)</b>
<b class="fc">&nbsp;                .orderByChild(Constants.EMAIL)</b>
<b class="fc">&nbsp;                .equalTo(email)</b>
<b class="fc">&nbsp;                .addListenerForSingleValueEvent(object : ValueEventListener {</b>
<b class="fc">&nbsp;                    override fun onDataChange(snapshot: DataSnapshot) {</b>
<b class="fc">&nbsp;                        if (snapshot.exists()) {</b>
<b class="fc">&nbsp;                            if (snapshot.children.count() == 1) {</b>
<b class="fc">&nbsp;                                snapshot.children.map { child -&gt;</b>
<b class="fc">&nbsp;                                    accountInfoRealTimeResponse = child.getValue(</b>
&nbsp;                                        AccountInfoRealtimeResponse::class.java
<b class="fc">&nbsp;                                    )</b>
<b class="fc">&nbsp;                                }</b>
<b class="fc">&nbsp;                                trySend(element = accountInfoRealTimeResponse)</b>
<b class="fc">&nbsp;                            } else {</b>
<b class="fc">&nbsp;                                Timber.w(message = &quot;Error(getAccountInfoFlowByEmail) -&gt; Current snapshot contains the same email more then once&quot;)</b>
<b class="fc">&nbsp;                                trySend(element = null)</b>
&nbsp;                            }
<b class="fc">&nbsp;                        } else {</b>
<b class="fc">&nbsp;                            Timber.e(message = &quot;Error(getAccountInfoFlowByEmail) -&gt; Current snapshot does not exist&quot;)</b>
<b class="fc">&nbsp;                            trySend(element = null)</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;
<b class="fc">&nbsp;                    override fun onCancelled(error: DatabaseError) {</b>
<b class="fc">&nbsp;                        Timber.e(message = &quot;Error(getAccountInfoFlowByEmail) -&gt; Database error when attempting to get account info&quot;)</b>
<b class="fc">&nbsp;                        trySend(element = null)</b>
&nbsp;                    }
<b class="pc">&nbsp;                })</b>
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override fun getAccountInfoListFlow(): Flow&lt;List&lt;AccountInfoRealtimeResponse&gt;?&gt; {</b>
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            val accountInfoRealTimeResponseArrayList: ArrayList&lt;AccountInfoRealtimeResponse&gt; = arrayListOf()</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;            firebaseDatabase.getReference(Constants.USERS)</b>
<b class="fc">&nbsp;                .child(Constants.ACCOUNT_INFO)</b>
<b class="fc">&nbsp;                .addListenerForSingleValueEvent(object : ValueEventListener {</b>
<b class="fc">&nbsp;                    override fun onDataChange(snapshot: DataSnapshot) {</b>
<b class="fc">&nbsp;                        if (snapshot.exists()) {</b>
<b class="fc">&nbsp;                            snapshot.children.map { child -&gt;</b>
<b class="pc">&nbsp;                                child.getValue(AccountInfoRealtimeResponse::class.java)</b>
<b class="pc">&nbsp;                                    ?.let { accountInfoRealTimeResponse -&gt;</b>
<b class="fc">&nbsp;                                        accountInfoRealTimeResponseArrayList.add(accountInfoRealTimeResponse)</b>
&nbsp;                                    }
<b class="fc">&nbsp;                            }</b>
<b class="fc">&nbsp;                            trySend(element = accountInfoRealTimeResponseArrayList.toList())</b>
<b class="fc">&nbsp;                        } else {</b>
<b class="fc">&nbsp;                            Timber.e(message = &quot;Error(getAccountInfoListFlow) -&gt; Current snapshot does not exist&quot;)</b>
<b class="fc">&nbsp;                            trySend(element = null)</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;
<b class="fc">&nbsp;                    override fun onCancelled(error: DatabaseError) {</b>
<b class="fc">&nbsp;                        Timber.e(message = &quot;Error(getAccountInfoListFlow) -&gt; Database error when attempting to get account info&quot;)</b>
<b class="fc">&nbsp;                        trySend(element = null)</b>
&nbsp;                    }
<b class="pc">&nbsp;                })</b>
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override fun getLastUpdatedDateFlow(): Flow&lt;Date?&gt; {</b>
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            firebaseDatabase.getReference(Constants.CONTENT_LAST_UPDATED_PATH)</b>
<b class="fc">&nbsp;                .child(Constants.LAST_UPDATED)</b>
<b class="fc">&nbsp;                .addListenerForSingleValueEvent(object : ValueEventListener {</b>
<b class="fc">&nbsp;                    override fun onDataChange(snapshot: DataSnapshot) {</b>
<b class="fc">&nbsp;                        if (snapshot.exists()) {</b>
<b class="fc">&nbsp;                            val lastUpdatedValue = snapshot.getValue(Long::class.java)</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;                            if (lastUpdatedValue != null) {</b>
<b class="fc">&nbsp;                                val lastUpdatedDate = Date(lastUpdatedValue)</b>
<b class="fc">&nbsp;                                trySend(lastUpdatedDate)</b>
<b class="fc">&nbsp;                            } else {</b>
<b class="fc">&nbsp;                                Timber.e(message = &quot;Error(getLastUpdatedDateFlow) -&gt; Value is null&quot;)</b>
<b class="fc">&nbsp;                                trySend(element = null)</b>
&nbsp;                            }
<b class="fc">&nbsp;                        } else {</b>
<b class="fc">&nbsp;                            Timber.e(message = &quot;Error(getLastUpdatedDateFlow) -&gt; Current snapshot does not exist&quot;)</b>
<b class="fc">&nbsp;                            trySend(element = null)</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;
<b class="fc">&nbsp;                    override fun onCancelled(error: DatabaseError) {</b>
<b class="fc">&nbsp;                        Timber.e(message = &quot;Error(getLastUpdatedDateFlow) -&gt; Database error when attempting to get updated date info&quot;)</b>
<b class="fc">&nbsp;                        trySend(element = null)</b>
&nbsp;                    }
<b class="pc">&nbsp;                })</b>
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override fun getAccountInfoKeyFlowByEmail(email: String): Flow&lt;String?&gt; {</b>
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            firebaseDatabase.getReference(Constants.USERS)</b>
<b class="fc">&nbsp;                .child(Constants.ACCOUNT_INFO)</b>
<b class="fc">&nbsp;                .orderByChild(Constants.EMAIL)</b>
<b class="fc">&nbsp;                .equalTo(email)</b>
<b class="fc">&nbsp;                .addListenerForSingleValueEvent(object : ValueEventListener {</b>
<b class="fc">&nbsp;                    override fun onDataChange(snapshot: DataSnapshot) {</b>
<b class="pc">&nbsp;                        if (snapshot.exists()) {</b>
<b class="pc">&nbsp;                            snapshot.children.firstOrNull()?.key?.let { childKey -&gt;</b>
<b class="fc">&nbsp;                                trySend(element = childKey)</b>
<b class="fc">&nbsp;                            } ?: run {</b>
<b class="fc">&nbsp;                                Timber.w(message = &quot;Warning(getAccountInfoKeyByEmail) -&gt; Current snapshot exists but key does not exist&quot;)</b>
<b class="fc">&nbsp;                                trySend(element = null)</b>
&nbsp;                            }
<b class="fc">&nbsp;                        } else {</b>
<b class="fc">&nbsp;                            Timber.w(message = &quot;Warning(getAccountInfoKeyByEmail) -&gt; Current snapshot does not exist&quot;)</b>
<b class="fc">&nbsp;                            trySend(element = null)</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;
<b class="fc">&nbsp;                    override fun onCancelled(p0: DatabaseError) {</b>
<b class="fc">&nbsp;                        Timber.e(message = &quot;Error(getAccountInfoKeyByEmail) -&gt; Database error when attempting to get account info key by email&quot;)</b>
<b class="fc">&nbsp;                        trySend(element = null)</b>
&nbsp;                    }
<b class="pc">&nbsp;                })</b>
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override fun getPlayerInfoList(accountKey: String): Flow&lt;List&lt;PlayerInfoRealtimeResponse&gt;&gt; {</b>
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            val playerInfoRealtimeResponseArrayList: ArrayList&lt;PlayerInfoRealtimeResponse&gt; = arrayListOf()</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;            firebaseDatabase.getReference(Constants.USERS)</b>
<b class="fc">&nbsp;                .child(Constants.ACCOUNT_INFO)</b>
<b class="fc">&nbsp;                .child(accountKey)</b>
<b class="fc">&nbsp;                .child(Constants.PLAYERS)</b>
<b class="fc">&nbsp;                .addListenerForSingleValueEvent(object : ValueEventListener {</b>
<b class="fc">&nbsp;                    override fun onDataChange(snapshot: DataSnapshot) {</b>
<b class="fc">&nbsp;                        if (snapshot.exists()) {</b>
<b class="fc">&nbsp;                            if (snapshot.childrenCount == Constants.FIREBASE_CHILDREN_COUNT_ZERO) {</b>
<b class="pc">&nbsp;                                Timber.w(&quot;Warning(getPlayerInfoList) -&gt; No players currently exist for this account&quot;)</b>
<b class="fc">&nbsp;                                trySend(element = emptyList())</b>
<b class="pc">&nbsp;                            } else {</b>
<b class="fc">&nbsp;                                for (playerSnapshot in snapshot.children) {</b>
<b class="fc">&nbsp;                                    playerSnapshot.getValue(PlayerInfoRealtimeResponse::class.java)</b>
<b class="pc">&nbsp;                                        ?.let {</b>
<b class="fc">&nbsp;                                            playerInfoRealtimeResponseArrayList.add(it)</b>
<b class="pc">&nbsp;                                        }</b>
&nbsp;                                }
<b class="pc">&nbsp;                            }</b>
&nbsp;
<b class="fc">&nbsp;                            trySend(element = playerInfoRealtimeResponseArrayList.toList())</b>
&nbsp;                        } else {
<b class="fc">&nbsp;                            trySend(element = emptyList())</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;
&nbsp;                    override fun onCancelled(p0: DatabaseError) {
<b class="fc">&nbsp;                        Timber.e(message = &quot;Error(getPlayerInfoList) -&gt; Database error when attempting to get user player list&quot;)</b>
<b class="fc">&nbsp;                        trySend(element = emptyList())</b>
&nbsp;                    }
&nbsp;                })
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    override fun isEmailVerifiedFlow(): Flow&lt;Boolean&gt; {
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            firebaseAuth.currentUser?.let { firebaseUser -&gt;</b>
<b class="fc">&nbsp;                firebaseUser.reload().addOnCompleteListener { task -&gt;</b>
<b class="fc">&nbsp;                    if (task.isSuccessful) {</b>
<b class="fc">&nbsp;                        trySend(element = firebaseUser.isEmailVerified)</b>
&nbsp;                    } else {
<b class="fc">&nbsp;                        Timber.e(message = &quot;Error(isEmailVerifiedFlow) -&gt; Add on complete listener was not successful&quot;)</b>
<b class="fc">&nbsp;                        trySend(element = false)</b>
&nbsp;                    }
&nbsp;                }
<b class="fc">&nbsp;            } ?: run {</b>
<b class="fc">&nbsp;                Timber.e(message = &quot;Error(isEmailVerifiedFlow) -&gt; Current user is set to null&quot;)</b>
<b class="fc">&nbsp;                trySend(element = false)</b>
&nbsp;            }
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    override fun isLoggedInFlow(): Flow&lt;Boolean&gt; {
<b class="fc">&nbsp;        return callbackFlow {</b>
<b class="fc">&nbsp;            trySend(element = firebaseAuth.currentUser != null)</b>
<b class="pc">&nbsp;            awaitClose()</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-09-28 16:12</div>
</div>
</body>
</html>
